/*! For license information please see AutocompleteProvider-763b36dd360035c979f7.js.LICENSE.txt */
(self.webpackChunkPlug_and_Play_Template=self.webpackChunkPlug_and_Play_Template||[]).push([[701],{64945:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});r(33948);var n=r(67294),o=r(45697),c=r.n(o),a=r(27354);class s{constructor(e){if(!e||0===e.length)throw new Error("At least one adapter is required for AutocompleteService");this.autocompleteAdapters=[],Array.from(e).forEach((e=>{if(!e||!e.hasOwnProperty("autocomplete"))throw new Error("".concat(e.constructor.name," is not implemented yet"));this.registerAdapter(e)}))}registerAdapter(e){this.autocompleteAdapters.push(e)}getResults(e,t){return Promise.all(this.autocompleteAdapters.map((r=>r.getResults(e,t)))).then((e=>{const t=[];let r=0,n=0;return e.map(((e,o)=>{let{data:c}=e;return r+=c.length,t[o]=[],c.length&&c.forEach((e=>{t[o][n++]=e})),t})),{results:t,count:r}})).catch((e=>(console.error(e),{results:0,count:0,error:e})))}}var u=r(48131),l=r(6838),i=r(66004);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function p(e){const{id:t,templates:o,placeholder:c,debounce:s,action:l,method:p,hiddenFields:m,inputAttributes:f,showSubmit:h}=e,{setSelectedIndex:v,selectedIndex:y,count:E,fetchResults:g}=(0,u.o)(),[b,S]=(0,n.useState)(null),[w,C]=(0,n.useState)(null),[k,x]=(0,n.useState)(null),[P,T]=(0,n.useState)(""),[_,N]=(0,n.useState)(""),[R,I]=(0,n.useState)(!1),O=(0,n.useRef)(),A=(0,n.createRef)(),j=(0,i.uY)(),[q,D]=(0,i.S5)(),{keyboardProps:L}=(0,a.v5)({onKeyUp:e=>{let t=-1;if(27===e.keyCode)return x(!1),void v(-1);if(40===e.keyCode&&(t=y+1>=E?0:y+1),38===e.keyCode&&(t=y-1<0?E-1:y-1),13===e.keyCode){if(-1===y)return void C(!0);q[y].click()}v(t),S(t),x(E>0)},onKeyDown:e=>(40!==e.keyCode&&38!==e.keyCode&&13!==e.keyCode||e.preventDefault(),!1)}),{focusWithinProps:U}=(0,a.L_)({onFocusWithin:()=>{x(E>0)},onBlurWithin:()=>{x(!1)}});(0,n.useEffect)((()=>{const e=(0,i.jS)(document.location.href,"query");T(e||"")}),[]),(0,n.useEffect)((()=>{x(E>0);const e=E>0?"".concat(E," results for ").concat(P):"No results found for ".concat(P);N(e)}),[E,P]),(0,n.useEffect)((()=>{const e=setTimeout((async()=>{await g(P,o)}),s);return()=>clearTimeout(e)}),[P]),(0,n.useEffect)((()=>{if(w&&O.current&&A.current){if(A.current.value=P,j){const e={TYPE:"SUBMIT",title:"NEEDS_REFRESH",url:window.location.href,time:Date.now()};return void j.trackedEventWithCb(e,O.current.submit())}O.current.submit()}}),[w]);const F=(e,t,r)=>{if(j){const n={TYPE:"CLICK",url:e,query:P,title:t};j.trackedEventWithCb(n,r)}r&&!j&&r()},M=(e,t)=>{e.preventDefault();const{action:r,action_t:n,title:o}=t;if("Q"===n||void 0===n)return T(r||t),void C(!0);F(r,o,(()=>document.location.href=r))};return n.createElement("div",{className:"autocomplete-concierge no-wysiwyg",role:"search"},n.createElement("div",d({},U,{role:"combobox","aria-expanded":k,"aria-owns":"".concat(t,"-grid"),"aria-haspopup":"grid","aria-controls":"".concat(t,"-input"),id:"".concat(t,"-combobox")}),n.createElement("div",{className:"sr-only","aria-live":"polite"},_),n.createElement("form",d({ref:O,action:l,method:p,className:"autocomplete-concierge__form-wrapper"},L),n.createElement("label",{htmlFor:"".concat(t,"-inputField"),id:"".concat(t,"-label"),className:"sr-only"},"Autocomplete search concierge"),n.createElement("input",d({ref:A,type:"text",id:"".concat(t,"-inputField"),autoComplete:"off","aria-autocomplete":"list","aria-controls":"".concat(t,"-grid"),"aria-activedescendant":-1===b?void 0:b,placeholder:c,onChange:e=>{let{currentTarget:{value:t}}=e;T(t)},onClick:()=>x(E>0),value:P,className:"autocomplete-concierge__input",name:"query",onBlur:()=>{setTimeout((()=>I(!1)),200)},onFocus:()=>{setTimeout((()=>I(!0)),200)}},f)),m&&m.map((e=>n.createElement("input",{key:e.id,type:"hidden",name:e.name,value:e.value}))),h&&n.createElement("button",{type:"submit",className:"autocomplete-concierge__submit",onClick:()=>C(!0)},n.createElement("svg",{className:"svg-icon"},n.createElement("title",null,"Submit search"),n.createElement("use",{href:"#search"})))),n.createElement("div",d({},L,{role:"grid","aria-labelledby":"".concat(t,"-label"),id:"".concat(t,"-grid"),className:["autocomplete-concierge__results",(!R||!k)&&"hidden"].join(" "),tabIndex:-1}),o&&o.map(((e,t)=>(e=>{const{template:t}=e,o=t.toLowerCase(),c=(0,n.useMemo)((()=>(0,n.lazy)((()=>r(42276)("./".concat(o))))),[]);return n.createElement(n.Suspense,{key:"component-".concat(o),fallback:n.createElement("span",{className:"sr-only"},"Loading component...")},n.createElement(c,e))})({...e,templateId:t,handleClick:M,trackedClick:F,childRefs:D}))))))}function m(e){const{adapters:t}=e,r=new s(t);return n.createElement(u.g,{initialState:l.E3,reducer:l.fG,autocompleteService:r},n.createElement(p,e))}const{string:f,arrayOf:h,shape:v,number:y,bool:E}=c();p.propTypes={id:f,templates:h(v({id:f,label:f,template:f,serviceUrl:f,params:f})).isRequired,placeholder:f,debounce:y,action:f,method:f,showSubmit:E},p.defaultProps={id:"autocomplete-search",placeholder:"Start your search here...",debounce:500,action:"search.html",method:"GET",showSubmit:!0}},6838:function(e,t,r){"use strict";r.d(t,{E3:function(){return c},fG:function(){return a},Ix:function(){return s}});const n="PNP/AUTOCOMPLETE/UPDATE_RESULTS",o="PNP/AUTOCOMPLETE/SET_SELECTED",c={results:[],count:0,query:"",selectedIndex:-1},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n:return{...e,results:t.results,count:t.count,query:t.query,selectedIndex:-1};case o:return{...e,selectedIndex:t.selectedIndex};default:return{...e}}},s=(e,t)=>({updateResults:(t,r)=>{e({type:n,results:t,count:r})},setSelectedIndex:t=>{e({type:o,selectedIndex:t})},fetchResults:async r=>{if(!r)return void e({type:n,results:[],count:0});const{results:o,count:c,error:a}=await t.getResults(r);if(a)return console.error("There was an error fetching results from the service."),console.info(a.message),void e({type:n,results:[],count:0});e({type:n,results:o,count:c,query:r})}})},48131:function(e,t,r){"use strict";r.d(t,{o:function(){return a},g:function(){return s}});r(33948);var n=r(67294),o=r(6838);const c=(0,n.createContext)();c.displayName="PNP-STORE";const a=()=>(0,n.useContext)(c),s=e=>{let{children:t,initialState:r,reducer:a,autocompleteService:s}=e;const[u,l]=(0,n.useReducer)(a,r),i=(0,n.useMemo)((()=>(0,o.Ix)(l,s)),[]);return n.createElement(c.Provider,{value:{...i,dispatch:l,...u}},t)}},42276:function(e,t,r){var n={"./organic":[44113,113],"./organic.jsx":[44113,113],"./people--v15":[62140,140],"./people--v15.jsx":[62140,140],"./people--v16":[12507,507],"./people--v16.jsx":[12507,507],"./programs--v15":[53700,588],"./programs--v15.jsx":[53700,588],"./programs--v16":[32723,723],"./programs--v16.jsx":[32723,723]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return r.e(t[1]).then((function(){return r(o)}))}o.keys=function(){return Object.keys(n)},o.id=42276,e.exports=o}}]);
//# sourceMappingURL=AutocompleteProvider-763b36dd360035c979f7.js.map